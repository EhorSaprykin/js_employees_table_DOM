{"version":3,"sources":["scripts/main.js"],"names":["headers","Array","from","document","querySelectorAll","tableSort","column","asc","direction","tBody","querySelector","sortedRows","sort","a","b","aText","textContent","toLocaleLowerCase","bText","includes","convertSalary","append","salary","split","join","forEach","header","addEventListener","classList","add","events","columnNumber","indexOf","target","contains","replace","rows","rowSelect","row","prevRow","remove","parentNode","table","tbody","showNotification","title","description","type","body","div","createElement","setAttribute","insertAdjacentHTML","setTimeout","style","display","submitButton","form","labels","children","preventDefault","i","length","tableData","input","firstElementChild","inputValue","value","trim","toLocaleString","innerText","childNodes","cell","addCellEvents","reset","tableCells","cellText","replaceChildren","focus","officeCell","parentElement","ageCell","salaryCell","select","replaceWith","salarySize","code"],"mappings":"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","file":"main.297ce505.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\n// Sort table part\n\nconst headers = Array.from(document.querySelectorAll('thead th'));\n\nheaders.forEach((header) => {\n  header.addEventListener('mouseover', function() {\n    header.classList.add('sorted__column-asc');\n  });\n\n  header.addEventListener('click', (events) => {\n    const columnNumber = headers.indexOf(events.target);\n\n    if (header.classList.contains('sorted__column-asc')) {\n      tableSort(columnNumber, true);\n\n      header.classList.replace('sorted__column-asc', 'sorted__column-desc');\n    } else {\n      tableSort(columnNumber, false);\n      header.classList.replace('sorted__column-desc', 'sorted__column-asc');\n    };\n  });\n});\n\nfunction tableSort(column, asc = true) {\n  const direction = asc ? 1 : -1;\n\n  const tBody = document.querySelector('tbody');\n  const rowsArray = Array.from(document.querySelectorAll('tbody tr'));\n\n  const sortedRows = rowsArray.sort((a, b) => {\n    let aText = a.querySelector(\n      `td:nth-child(${column + 1})`).textContent.toLocaleLowerCase();\n\n    let bText = b.querySelector(\n      `td:nth-child(${column + 1})`).textContent.toLocaleLowerCase();\n\n    if (aText.includes('$') || bText.includes('$')) {\n      aText = convertSalary(aText);\n      bText = convertSalary(bText);\n    }\n\n    return aText > bText ? (1 * direction) : (-1 * direction);\n  });\n\n  tBody.append(...sortedRows);\n};\n\nfunction convertSalary(salary) {\n  return +salary.split('$').join('').split(',').join('');\n};\n\n// Select row part\n\nconst rows = document.querySelectorAll('tbody tr');\n\nrows.forEach(row => {\n  rowSelect(row);\n});\n\nfunction rowSelect(row) {\n  row.addEventListener('click', (events) => {\n    rows.forEach((prevRow) => {\n      prevRow.classList.remove('active');\n    });\n\n    const currentRow = events.target.parentNode;\n\n    currentRow.classList.add('active');\n  });\n};\n\n// Create employee form part\n\nconst table = document.querySelector('table');\nconst tbody = document.querySelector('tbody');\n\ntable.insertAdjacentHTML(\n  'afterend',\n  `\n  <form class='new-employee-form'>\n    <label>\n      Name:\n      <input\n      name='name'\n      type='text'\n      class='name'\n      data-qa='name'\n      required\n      >\n    </label>\n\n    <label>\n      Position:\n      <input\n      name='position'\n      class='position'\n      type='text'\n      data-qa='position'\n      required\n      >\n    </label>\n\n    <label>\n      Office:\n\n      <select\n      data-qa='office'\n      id='office'\n      name='office'\n      class='office'\n      >\n        <option value='Tokyo'>Tokyo</option>\n        <option value='Singapore'>Singapore</option>\n        <option value='London'>London</option>\n        <option value='New York'>New York</option>\n        <option value='Edinburgh'>Edinburgh</option>\n        <option value='San Francisco'>San Francisco</option>\n      </select>\n    </label>\n\n    <label>\n      Age:\n      <input\n      type='number'\n      data-qa='age'\n      class='age'\n      required\n      >\n    </label>\n\n    <label>\n      Salary:\n      <input\n      type='number'\n      data-qa='salary'\n      class='salary'\n      required\n      >\n    </label>\n\n    <button type='submit'>Save to table</button>\n  </form>\n`\n);\n\nfunction showNotification(title, description, type) {\n  const body = document.querySelector('body');\n  const div = document.createElement('div');\n\n  body.append(div);\n\n  div.setAttribute('data-qa', 'notification');\n  div.classList = `notification ${type}`;\n\n  div.insertAdjacentHTML(\n    'afterbegin',\n    `\n      <h2 class= 'title'>${title}</h2>\n      <p>${description}</p>\n      `\n  );\n\n  setTimeout(function() {\n    div.style.display = 'none';\n  }, 2000);\n}\n\nconst submitButton = document.querySelector('button');\n\nsubmitButton.addEventListener('click', function(events) {\n  const form = document.querySelector('form');\n  const labels = form.children;\n  const row = document.createElement('tr');\n\n  events.preventDefault();\n\n  for (let i = 0; i < labels.length - 1; i++) {\n    const tableData = document.createElement('td');\n    const input = labels[i].firstElementChild;\n    let inputValue = input.value;\n\n    switch (true) {\n      case (input.classList.value === 'name'\n      && (inputValue.trim().length < 4\n      || inputValue.includes('. '))):\n        return showNotification(\n          'Error',\n          'Name must have more than 3 letters!',\n          'error'\n        );\n\n      case (input.classList.value === 'position'\n      && inputValue.trim().length === 0):\n        return showNotification(\n          'Error',\n          'You must specify your position!',\n          'error'\n        );\n\n      case (input.classList.value === 'age' && (+inputValue < 18\n      || +inputValue > 90\n      || !+inputValue)):\n        return showNotification(\n          'Error',\n          'Age must be in range from 18 to 90 years!',\n          'error'\n        );\n\n      case (input.classList.value === 'salary'):\n        if (inputValue.length === 0) {\n          return showNotification(\n            'Error',\n            'You must enter the salary!',\n            'error'\n          );\n        };\n\n        const salarySize = +inputValue;\n\n        inputValue = '$' + salarySize.toLocaleString('en-US');\n        break;\n    };\n\n    row.append(tableData);\n    tableData.innerText = inputValue;\n  };\n\n  showNotification('Success', 'The form add into Table', 'success');\n  tbody.append(row);\n\n  rowSelect(row);\n\n  row.childNodes.forEach((cell) => {\n    addCellEvents(cell);\n  });\n\n  form.reset();\n});\n\n// Edit cell part\n\nconst tableCells = document.querySelectorAll('td');\n\ntableCells.forEach(cell => addCellEvents(cell));\n\nfunction addCellEvents(cell) {\n  cell.addEventListener('dblclick', function() {\n    const input = document.createElement('input');\n    const cellText = cell.innerText;\n\n    input.classList.add('cell-input');\n\n    cell.replaceChildren(input);\n    input.focus();\n\n    const officeCell = cell.parentElement.querySelectorAll('td')[2];\n    const ageCell = cell.parentElement.querySelectorAll('td')[3];\n    const salaryCell = cell.parentElement.querySelectorAll('td')[4];\n\n    if (cell === ageCell || cell === salaryCell) {\n      input.setAttribute('type', 'number');\n    };\n\n    if (cell === officeCell) {\n      input.remove();\n\n      cell.insertAdjacentHTML('afterbegin', `\n      <select\n      data-qa='office'\n      id='office'\n      name='office'\n      class='office'\n      >\n        <option value='Tokyo'>Tokyo</option>\n        <option value='Singapore'>Singapore</option>\n        <option value='London'>London</option>\n        <option value='New York'>New York</option>\n        <option value='Edinburgh'>Edinburgh</option>\n        <option value='San Francisco'>San Francisco</option>\n      </select>\n      `);\n\n      const select = document.querySelector('tbody select');\n\n      select.value = cellText;\n      select.focus();\n    };\n\n    cell.addEventListener('blur', function() {\n      if (cell === officeCell) {\n        const select = document.querySelector('tbody select');\n\n        return select.replaceWith(select.value);\n      };\n\n      if (cell === ageCell\n        && input.value.length > 0\n        && (input.value < 18 || input.value > 90)) {\n        showNotification('Error',\n          'Age must be in range from 18 to 90 years!', 'error');\n\n        return input.replaceWith(cellText);\n      };\n\n      if (cell === salaryCell && input.value.length > 0) {\n        const salarySize = +input.value;\n\n        return input.replaceWith('$' + salarySize.toLocaleString('en-US'));\n      };\n\n      input.value\n        ? input.replaceWith(input.value)\n        : input.replaceWith(cellText);\n    }, true);\n\n    cell.addEventListener('keypress', function(events) {\n      if (events.code === 'Enter') {\n        if (cell === officeCell) {\n          const select = document.querySelector('tbody select');\n\n          return select.replaceWith(select.value);\n        };\n\n        if (cell === ageCell && (input.value < 18 || input.value > 90)) {\n          showNotification('Error',\n            'Age must be in range from 18 to 90 years!', 'error');\n\n          return input.replaceWith(cellText);\n        };\n\n        input.value\n          ? input.replaceWith(input.value)\n          : input.replaceWith(cellText);\n      };\n    }, true);\n  });\n};\n"]}